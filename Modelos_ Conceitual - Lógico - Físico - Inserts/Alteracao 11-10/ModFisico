/* Lógico_1: */

CREATE TABLE PESSOA_JURIDICA (
    cnpj varchar(18),
    id int PRIMARY KEY,
    FK_PESSOA_id int
);

CREATE TABLE ENDERECO (
    complemento varchar(50),
    cep varchar(9),
    id int PRIMARY KEY,
    rua varchar(50),
    numero int,
    FK_BAIRRO_Id int
);

CREATE TABLE FUNCIONARIO (
    matricula varchar(20),
    dataAdmissao date,
    dataDemissao date,
    id int PRIMARY KEY,
    FK_PESSOA_JURIDICA_id int,
    FK_CARGO_id int,
    FK_PESSOA_FISICA_id int
);

CREATE TABLE PESSOA (
    senha varchar(25),
    id int PRIMARY KEY,
    nome varchar(100)
);

CREATE TABLE ESTACIONAMENTO (
    latitude varchar(15),
    valorHora numeric,
    nome varchar(100),
    id int PRIMARY KEY,
    longitude varchar(15),
    FK_PESSOA_JURIDICA_id int,
    FK_ENDERECO_id int
);

CREATE TABLE CARGO (
    id int PRIMARY KEY,
    nome varchar(100)
);

CREATE TABLE PESSOA_FISICA (
    cpf varchar(14),
    id int PRIMARY KEY,
    FK_PESSOA_id int
);

CREATE TABLE PAGAMENTO_ESTACIONAMENTO (
    data date,
    valor numeric,
    id int PRIMARY KEY,
    FK_CARTAO_id int
);

CREATE TABLE VAGA (
    numero int,
    id int PRIMARY KEY,
    FK_ESTACIONAMENTO_id int
);

CREATE TABLE MOTORISTA (
    cnh varchar(11),
    id int PRIMARY KEY,
    FK_PESSOA_FISICA_id int
);

CREATE TABLE VEICULO (
    ano int,
    placa varchar(8),
    id int PRIMARY KEY,
    FK_MOTORISTA_id int,
    FK_MODELO_id int
);

CREATE TABLE CARTAO (
    id int PRIMARY KEY,
    numero varchar(16),
    csv varchar(10),
    validade date,
    FK_MOTORISTA_id int
);

CREATE TABLE RESERVA (
    Id int PRIMARY KEY,
    horaReserva time,
    dataReserva date,
    horaSaida time,
    saidaPrevista time,
    FK_PAGAMENTO_ESTACIONAMENTO_id int,
    FK_VAGA_id int,
    FK_VEICULO_id int
);

CREATE TABLE CONTATO (
    Id int PRIMARY KEY,
    Contato varchar(50),
    FK_PESSOA_id int,
    FK_TIPO_CONTATO_Id int
);

CREATE TABLE TIPO_CONTATO (
    Id int PRIMARY KEY,
    Tipo varchar(50)
);

CREATE TABLE BAIRRO (
    Id int PRIMARY KEY,
    Bairro varchar(50),
    FK_CIDADE_Id int
);

CREATE TABLE CIDADE (
    Id int PRIMARY KEY,
    Cidade varchar(50),
    FK_ESTADO_Id int
);

CREATE TABLE ESTADO (
    Id int PRIMARY KEY,
    Estado varchar(50)
);

CREATE TABLE MARCA (
    id int PRIMARY KEY,
    marca varchar(50)
);

CREATE TABLE MODELO (
    id int PRIMARY KEY,
    modelo varchar(50),
    FK_MARCA_id int
);

CREATE TABLE trabalha (
    FK_FUNCIONARIO_id int,
    FK_ESTACIONAMENTO_id int
);
 
ALTER TABLE PESSOA_JURIDICA ADD CONSTRAINT FK_PESSOA_JURIDICA_1
    FOREIGN KEY (FK_PESSOA_id)
    REFERENCES PESSOA (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE ENDERECO ADD CONSTRAINT FK_ENDERECO_1
    FOREIGN KEY (FK_BAIRRO_Id)
    REFERENCES BAIRRO (Id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNCIONARIO_1
    FOREIGN KEY (FK_PESSOA_JURIDICA_id)
    REFERENCES PESSOA_JURIDICA (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNCIONARIO_2
    FOREIGN KEY (FK_CARGO_id)
    REFERENCES CARGO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNCIONARIO_3
    FOREIGN KEY (FK_PESSOA_FISICA_id)
    REFERENCES PESSOA_FISICA (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE ESTACIONAMENTO ADD CONSTRAINT FK_ESTACIONAMENTO_1
    FOREIGN KEY (FK_PESSOA_JURIDICA_id)
    REFERENCES PESSOA_JURIDICA (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE ESTACIONAMENTO ADD CONSTRAINT FK_ESTACIONAMENTO_2
    FOREIGN KEY (FK_ENDERECO_id)
    REFERENCES ENDERECO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE PESSOA_FISICA ADD CONSTRAINT FK_PESSOA_FISICA_1
    FOREIGN KEY (FK_PESSOA_id)
    REFERENCES PESSOA (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE PAGAMENTO_ESTACIONAMENTO ADD CONSTRAINT FK_PAGAMENTO_ESTACIONAMENTO_1
    FOREIGN KEY (FK_CARTAO_id)
    REFERENCES CARTAO (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE VAGA ADD CONSTRAINT FK_VAGA_1
    FOREIGN KEY (FK_ESTACIONAMENTO_id)
    REFERENCES ESTACIONAMENTO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE MOTORISTA ADD CONSTRAINT FK_MOTORISTA_1
    FOREIGN KEY (FK_PESSOA_FISICA_id)
    REFERENCES PESSOA_FISICA (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE VEICULO ADD CONSTRAINT FK_VEICULO_1
    FOREIGN KEY (FK_MOTORISTA_id)
    REFERENCES MOTORISTA (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE VEICULO ADD CONSTRAINT FK_VEICULO_2
    FOREIGN KEY (FK_MODELO_id)
    REFERENCES MODELO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE CARTAO ADD CONSTRAINT FK_CARTAO_1
    FOREIGN KEY (FK_MOTORISTA_id)
    REFERENCES MOTORISTA (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE RESERVA ADD CONSTRAINT FK_RESERVA_1
    FOREIGN KEY (FK_PAGAMENTO_ESTACIONAMENTO_id)
    REFERENCES PAGAMENTO_ESTACIONAMENTO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE RESERVA ADD CONSTRAINT FK_RESERVA_2
    FOREIGN KEY (FK_VAGA_id)
    REFERENCES VAGA (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE RESERVA ADD CONSTRAINT FK_RESERVA_3
    FOREIGN KEY (FK_VEICULO_id)
    REFERENCES VEICULO (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE CONTATO ADD CONSTRAINT FK_CONTATO_1
    FOREIGN KEY (FK_PESSOA_id)
    REFERENCES PESSOA (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE CONTATO ADD CONSTRAINT FK_CONTATO_2
    FOREIGN KEY (FK_TIPO_CONTATO_Id)
    REFERENCES TIPO_CONTATO (Id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE BAIRRO ADD CONSTRAINT FK_BAIRRO_1
    FOREIGN KEY (FK_CIDADE_Id)
    REFERENCES CIDADE (Id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE CIDADE ADD CONSTRAINT FK_CIDADE_1
    FOREIGN KEY (FK_ESTADO_Id)
    REFERENCES ESTADO (Id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE MODELO ADD CONSTRAINT FK_MODELO_1
    FOREIGN KEY (FK_MARCA_id)
    REFERENCES MARCA (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE trabalha ADD CONSTRAINT FK_trabalha_0
    FOREIGN KEY (FK_FUNCIONARIO_id)
    REFERENCES FUNCIONARIO (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE trabalha ADD CONSTRAINT FK_trabalha_1
    FOREIGN KEY (FK_ESTACIONAMENTO_id)
    REFERENCES ESTACIONAMENTO (id)
    ON DELETE SET NULL ON UPDATE CASCADE;